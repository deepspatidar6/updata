"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[6329],{6329:(E,m,s)=>{s.r(m),s.d(m,{EditcategoryModule:()=>c});var l=s(6895),u=s(2761),a=s(4006),t=s(4650),f=s(7185),h=s(5913);function y(o,i){1&o&&(t.TgZ(0,"div"),t._uU(1,"Category is required"),t.qZA())}function v(o,i){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,y,2,0,"div",16),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.productcategory.errors.required)}}function C(o,i){1&o&&(t.TgZ(0,"span"),t._uU(1,"Update Category "),t.qZA())}function Z(o,i){1&o&&(t.TgZ(0,"span"),t._UZ(1,"span",18),t._uU(2," Loading... "),t.qZA())}const b=function(o){return{"is-invalid":o}};class g{constructor(i,e,n,p,r){this.activate=i,this.toastr=e,this.formBuilder=n,this.router=p,this.api=r,this.spinner=!1,this.spanhide=!0,this.submitted=!1,this.editform=this.formBuilder.group({productcategory:["",a.kI.required]})}ngOnInit(){this.getcatdata()}get f(){return this.editform.controls}getcatdata(){let i=localStorage.getItem("id");this.api.getcatById(i).subscribe(e=>{this.catdata=e,console.log(e),this.editform.patchValue({productcategory:this.catdata.productcategory,image:this.catdata.image}),this.imageSrc=this.catdata.image,console.log(this.catdata)})}onFileChange(i){const e=new FileReader;if(i.target.files&&i.target.files.length){const[n]=i.target.files;this.selectedfile=i.target.files[0],e.readAsDataURL(n),e.onload=()=>{"string"==typeof e.result&&(this.imageSrc=e.result)}}}onSubmit(i){this.photos=i.files[0],this.editimg=this.photos?this.photos:this.catdata.image;const e=new FormData;let n=this.editform.value;e.append("image",this.editimg),e.append("data",JSON.stringify(n)),this.spanhide=!1,this.spinner=!0;let p=localStorage.getItem("id");this.api.updatecat(p,e).subscribe(r=>{console.log(r),this.spanhide=!0,this.spinner=!1,this.router.navigate(["/product/category-list"]),this.toastr.success("Category Updated Successfully")},r=>{this.spanhide=!0,this.spinner=!1,this.toastr.error(r.error.error.message)})}}g.\u0275fac=function(i){return new(i||g)(t.Y36(u.gz),t.Y36(f._W),t.Y36(a.qu),t.Y36(u.F0),t.Y36(h.d))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-editcategory"]],decls:28,vars:8,consts:[[1,"page-header"],[1,"page-title"],[1,"card"],[1,"card-body"],[1,"register-form"],[1,"p-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-12"],[1,"form-group"],["type","text","formControlName","productcategory",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","file","formControlName","image","placeholder","Please upload image",1,"form-control",3,"change"],["img",""],["width","150px","alt","",1,"mt-0",3,"src"],[1,"form-group","pt-2","pb-2"],["type","submit",1,"btn","btn-submit","me-2"],[4,"ngIf"],[1,"invalid-feedback"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,e){if(1&i){const n=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Product Edit Category"),t.qZA(),t.TgZ(4,"h6"),t._uU(5,"Edit a product Category"),t.qZA()()(),t.TgZ(6,"div",2)(7,"div",3)(8,"div",4)(9,"form",5),t.NdJ("ngSubmit",function(){t.CHM(n);const r=t.MAs(22);return t.KtG(e.onSubmit(r))}),t.TgZ(10,"div",6)(11,"div",7)(12,"div",8)(13,"label"),t._uU(14,"Category Name "),t.qZA(),t._UZ(15,"input",9),t.YNc(16,v,2,1,"div",10),t.qZA()(),t.TgZ(17,"div",7)(18,"div",8)(19,"label"),t._uU(20,"Upload Product Image"),t.qZA(),t.TgZ(21,"input",11,12),t.NdJ("change",function(r){return e.onFileChange(r)}),t.qZA(),t._UZ(23,"img",13),t.qZA()()(),t.TgZ(24,"div",14)(25,"button",15),t.YNc(26,C,2,0,"span",16),t.YNc(27,Z,3,0,"span",16),t.qZA()()()()()()}2&i&&(t.xp6(9),t.Q6J("formGroup",e.editform),t.xp6(6),t.Q6J("ngClass",t.VKq(6,b,e.submitted&&e.f.productcategory.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.productcategory.errors),t.xp6(7),t.s9C("src",e.imageSrc,t.LSH),t.xp6(3),t.Q6J("ngIf",e.spanhide),t.xp6(1),t.Q6J("ngIf",e.spinner))},dependencies:[l.mk,l.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u]});const T=[{path:"",component:g}];class d{}d.\u0275fac=function(i){return new(i||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[u.Bz.forChild(T),u.Bz]});class c{}c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[l.ez,d,a.u5,a.UX]})}}]);